{% extends "layout.html" %}

{% block title %}Fijar Precio de Venta{% endblock %}

{% block content %}
  <h1>Fijar Precio de Venta</h1>
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  {% if item %}
  <form method="post">
    <fieldset>
      <legend>Detalles del Producto</legend>
      <p><strong>Producto:</strong> {{ item[1] }}</p>
      <p><strong>Variedad:</strong> {{ item[2] or 'N/A' }}</p>
      <p><strong>Lote:</strong> {{ item[3] }}</p>
      <p><strong>Precio de Compra:</strong> ${{ "%.2f"|format(item[10]|float) if item[10] is not none and item[10] != '' else 'N/A' }} por {{ item[11] or 'unidad' }}</p>
      <p><strong>Precio de Venta Actual:</strong> ${{ "%.2f"|format(item[7]) if item[7] is not none else 'No definido' }}</p>
    </fieldset>
    <br>
    <label for="nuevo_precio">Nuevo Precio de Venta por Unidad:</label>
    <input type="number" step="0.01" name="nuevo_precio" id="nuevo_precio" required min="0" value="{{ item[7] or '' }}">
    <br><br>
    <button type="submit">Guardar Precio</button>
    <a href="{{ url_for('main.inventario') }}" class="button-secondary">Cancelar</a>
  </form>
  {% endif %}
{% endblock %}